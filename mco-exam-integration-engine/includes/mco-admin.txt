<?php
// Add top-level admin menu
function mco_exam_admin_menu() {
    add_menu_page(
        'Exam App Engine',
        'Exam App Engine',
        'manage_options',
        'mco-exam-settings',
        'mco_exam_settings_page',
        'dashicons-welcome-learn-more',
        25
    );
}
add_action('admin_menu', 'mco_exam_admin_menu');

// Admin page content
function mco_exam_settings_page() {
    ?>
    <div class="wrap mco-admin-wrapper">
        <h1>Exam App Engine - Settings & Tools</h1>
        <?php settings_errors(); ?>

        <h2 class="nav-tab-wrapper">
            <a href="?page=mco-exam-settings&tab=main" class="nav-tab <?php echo (!isset($_GET['tab']) || $_GET['tab'] == 'main') ? 'nav-tab-active' : ''; ?>">Main Settings</a>
            <a href="?page=mco-exam-settings&tab=certs" class="nav-tab <?php echo (isset($_GET['tab']) && $_GET['tab'] == 'certs') ? 'nav-tab-active' : ''; ?>">Certificate Templates</a>
             <a href="?page=mco-exam-settings&tab=tools" class="nav-tab <?php echo (isset($_GET['tab']) && $_GET['tab'] == 'tools') ? 'nav-tab-active' : ''; ?>">Tools</a>
             <a href="?page=mco-exam-settings&tab=bulk" class="nav-tab <?php echo (isset($_GET['tab']) && $_GET['tab'] == 'bulk') ? 'nav-tab-active' : ''; ?>">Bulk Data</a>
        </h2>

        <div class="mco-tab-content">
            <?php
            $active_tab = isset($_GET['tab']) ? $_GET['tab'] : 'main';
            if ($active_tab == 'main') {
                mco_render_main_settings_tab();
            } elseif ($active_tab == 'certs') {
                mco_render_certificate_templates_tab();
            } elseif ($active_tab == 'tools') {
                mco_render_tools_tab();
            } elseif ($active_tab == 'bulk') {
                mco_render_bulk_data_tab();
            }
            ?>
        </div>
    </div>
    <?php
}
?>
