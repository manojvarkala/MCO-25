<?php
// Add admin menu for the Social Poster
function mco_social_admin_menu() {
    add_submenu_page(
        'mco-exam-settings',
        'Social Poster',
        'Social Poster',
        'manage_options',
        'mco-social-poster',
        'mco_social_settings_page'
    );
}
add_action('admin_menu', 'mco_social_admin_menu');

// Settings page content
function mco_social_settings_page() {
    ?>
    <div class="wrap">
        <h1>MCO Social Poster Settings</h1>
        <p>Configure your social media API keys and settings here.</p>
        <form method="post" action="options.php">
            <?php
                settings_fields('mco-social-settings-group');
                do_settings_sections('mco-social-poster');
                submit_button();
            ?>
        </form>
    </div>
    <?php
}

// Register settings
function mco_social_register_settings() {
    register_setting('mco-social-settings-group', 'mco_facebook_api_key');
    register_setting('mco-social-settings-group', 'mco_twitter_api_key');

    add_settings_section('mco_social_api_section', 'API Keys', null, 'mco-social-poster');

    add_settings_field('mco_facebook_api_key', 'Facebook API Key', 'mco_facebook_api_key_callback', 'mco-social-poster', 'mco_social_api_section');
    add_settings_field('mco_twitter_api_key', 'Twitter API Key', 'mco_twitter_api_key_callback', 'mco-social-poster', 'mco_social_api_section');
}
add_action('admin_init', 'mco_social_register_settings');

// Field callbacks
function mco_facebook_api_key_callback() {
    $option = get_option('mco_facebook_api_key');
    echo "<input type='text' name='mco_facebook_api_key' value='" . esc_attr($option) . "' class='regular-text' />";
}

function mco_twitter_api_key_callback() {
    $option = get_option('mco_twitter_api_key');
    echo "<input type='text' name='mco_twitter_api_key' value='" . esc_attr($option) . "' class='regular-text' />";
}
?>
